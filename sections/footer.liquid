{% comment %}
  Refined Shopify Footer - Optimized for Pixel Perfection
  Matches colors: Brand Orange (#e85a3c), Navy (#1c252e), Bottom Bar (#3a4a58)
{% endcomment %}

{% assign menu_blocks = section.blocks | where: 'type', 'menu_column' %}
{% assign social_blocks = section.blocks | where: 'type', 'social_link' %}
{% assign payment_blocks = section.blocks | where: 'type', 'payment_icon' %}
{% assign contact_block = section.blocks | where: 'type', 'contact_info' | first %}
{% assign newsletter_block = section.blocks | where: 'type', 'newsletter' | first %}

<footer class="mt-5 border-t-2 border-[#1ab2c5] bg-[#1c252e] text-white lg:mt-8 font-['Inter',sans-serif]">
  <div class="container mx-auto relative pb-10 pt-16 xl:pb-25 px-4 lg:px-8">
    
    {% if section.settings.badge_image != blank %}
      <a class="absolute right-3.5 top-0 -translate-y-1/2 z-10" href="{{ section.settings.badge_link }}">
        {{ section.settings.badge_image | image_url: width: 140 | image_tag: class: 'max-w-[100px] lg:max-w-[140px]', loading: 'lazy' }}
      </a>
    {% endif %}

    <div class="lg:grid lg:grid-cols-12 lg:gap-3.5">
      
      <!-- Contact Info Block -->
      {% if contact_block %}
        <div class="lg:col-span-6 xl:flex xl:flex-col xl:col-span-4 mb-8 lg:mb-0">
          <p class="tracking-wider text-[#e85a3c] mb-2 font-bold text-lg uppercase">
            {{ contact_block.settings.heading }}
          </p>
          <div class="text-white-footer">
            <p>{{ contact_block.settings.subheading }}</p>
            <div class="mb-12 mt-6">
              {% if contact_block.settings.phone_number != blank %}
                <a class="flex max-w-max items-center gap-2.5 py-1 transition hover:text-[#1ab2c5] font-bold text-lg" href="tel:{{ contact_block.settings.phone_number }}">
                  <svg width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M14.71615,10.50235c-0.97961,0 -1.94138,-0.15396 -2.8529,-0.45445c-0.44666,-0.15304 -0.99564,-0.01352 -1.26823,0.26686l-1.79901,1.35826c-2.08637,-1.11359 -3.37154,-2.39842 -4.47006,-4.46914l1.31813,-1.75196c0.34241,-0.34271 0.46532,-0.84164 0.31815,-1.31061c-0.30258,-0.91608 -0.45616,-1.87755 -0.45616,-2.85771c0,-0.70771 -0.57598,-1.28341 -1.28391,-1.28341h-2.93827c-0.70793,0 -1.28391,0.5757 -1.28391,1.28341c0,8.11459 6.60164,14.71587 14.71619,14.71587c0.70793,0 1.2838,-0.57578 1.2838,-1.28399v-2.92964c0,-0.70821 -0.57598,-1.28349 -1.2838,-1.28349z"></path>
                  </svg>
                  {{ contact_block.settings.phone_number }}
                </a>
              {% endif %}
              {% if contact_block.settings.email != blank %}
                <a class="flex max-w-max items-center gap-2.5 py-1 transition hover:text-[#1ab2c5]" href="mailto:{{ contact_block.settings.email }}">
                  <svg width="16" height="12" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 12" fill="currentColor">
                    <path d="M15.11967,0.14937l-7.1283,5.57581l-7.12841,-5.57581c0.20714,-0.09964 0.43156,-0.14962 0.67314,-0.14962h12.91042c0.25898,0 0.46612,0.04998 0.67314,0.14962zM15.99995,1.38054c0,0.05049 0,9.10451 0,9.13814c0,0.81544 -0.69042,1.48101 -1.53614,1.48101h-12.9277c-0.84572,0 -1.53603,-0.66557 -1.53603,-1.48101c0,-0.05007 0,-9.10401 0,-9.13814l7.50801,5.87572c0.13813,0.11699 0.31071,0.16614 0.48328,0.16614c0.17258,0 0.34515,-0.04915 0.48328,-0.16614z"></path>
                  </svg>
                  {{ contact_block.settings.email_text }}
                </a>
              {% endif %}
            </div>
          </div>
          
          <div class="mb-8 flex items-center gap-5 xl:mt-auto">
            {% if contact_block.settings.social_button_text != blank %}
              <a href="{{ contact_block.settings.social_button_url }}" class="footer-ribbon bg-[#e85a3c] text-white text-[12px] font-bold uppercase px-6 py-2.5 transition-colors hover:bg-[#d04a2e]" style="clip-path: polygon(0% 0%, 90% 0%, 100% 50%, 90% 100%, 0% 100%);">
                {{ contact_block.settings.social_button_text }}
              </a>
            {% endif %}
            
            <ul class="flex gap-1.5 lg:gap-2.5">
              {% for block in social_blocks %}
                <li>
                  <a href="{{ block.settings.url }}" class="block transition hover:opacity-80" aria-label="{{ block.settings.label }}">
                    <div class="w-8 h-8 lg:w-10 lg:h-10">{% render 'icon-social', icon: block.settings.icon %}</div>
                  </a>
                </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      {% endif %}

      <!-- Menu Columns with Accordion Logic -->
      {% for block in menu_blocks %}
        <div class="lg:col-span-6 xl:col-span-2 border-t border-[#313f55] lg:border-t-0" {{ block.shopify_attributes }}>
          {% assign menu_handle = block.settings.menu %}
          {% assign menu_links = linklists[menu_handle].links %}
          {% if block.settings.heading != blank %}
            {% assign menu_title = block.settings.heading %}
          {% else %}
            {% assign menu_title = linklists[menu_handle].title %}
          {% endif %}
          
          <details class="group lg:hidden">
            <summary class="flex justify-between items-center py-4 cursor-pointer list-none text-lg font-bold uppercase tracking-wider">
              {{ menu_title }}
              <span class="relative h-4 w-4">
                <span class="absolute top-1/2 left-0 h-0.5 w-4 bg-white -translate-y-1/2"></span>
                <span class="absolute top-0 left-1/2 h-4 w-0.5 bg-white -translate-x-1/2 transition-transform group-open:rotate-90"></span>
              </span>
            </summary>
            <ul class="pb-4 space-y-2.5">
              {% for link in menu_links %}
                <li><a href="{{ link.url }}" class="text-white hover:text-[#1ab2c5] transition-colors">{{ link.title }}</a></li>
              {% endfor %}
            </ul>
          </details>
          <div class="hidden lg:block">
            <p class="py-4 text-lg font-bold uppercase tracking-wider">{{ menu_title }}</p>
            <ul class="space-y-2.5">
              {% for link in menu_links %}
                <li><a href="{{ link.url }}" class="text-white hover:text-[#1ab2c5] transition-colors">{{ link.title }}</a></li>
              {% endfor %}
            </ul>
          </div>
        </div>
      {% endfor %}

      <!-- Newsletter & Payments -->
      {% if newsletter_block %}
        <div class="lg:col-span-6 xl:flex xl:flex-col xl:col-span-4 mt-8 lg:mt-0 lg:col-start-7 lg:row-start-1 xl:col-start-9" {{ newsletter_block.shopify_attributes }}>
          <p class="tracking-wider text-white mb-6 font-bold text-lg uppercase">
            {{ newsletter_block.settings.heading }}
          </p>
          <div>
            <form action="{{ newsletter_block.settings.form_action }}" method="post" class="flex gap-2.5 mb-10 h-12">
              <input type="email" placeholder="Enter your email ..." required class="grow rounded pl-3.5 bg-white text-gray-900 outline-none text-sm">
              <button type="submit" class="bg-[#e85a3c] text-white px-6 font-normal uppercase text-sm hover:bg-[#d04a2e] transition-colors rounded">
                Subscribe
              </button>
            </form>
            
            <ul class="grid grid-cols-4 gap-3.5">
              {% for block in payment_blocks %}
                <li class="flex h-10 flex-1 items-center justify-center rounded border border-[#3d4a5d] lg:h-12" {{ block.shopify_attributes }}>
                  <div class="max-h-6 max-w-[80%] flex items-center justify-center">
                    {% if block.settings.custom_image != blank %}
                      {{ block.settings.custom_image | image_url: width: 80 | image_tag: class: 'h-full w-auto object-contain' }}
                    {% else %}
                      {% render 'icon-payment', icon: block.settings.icon %}
                    {% endif %}
                  </div>
                </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      {% endif %}
      
    </div>
  </div>

  <!-- Bottom Copyright Bar -->
  <div class="relative bg-[#3a4a58] py-12 text-center">
    <span class="absolute left-1/2 top-0 -translate-x-1/2 -translate-y-1/2 p-2 rounded-full">
      {% if section.settings.footer_logo %}
        {{ section.settings.footer_logo | image_url: width: 40 | image_tag: class: 'max-w-[3`0px]', loading: 'lazy' }}
      {% else %}
        <!-- Default Logo Placeholder -->
        <svg class="w-5 h-5" viewBox="0 0 40 50"><path d="M20 0C20 0 5 18 5 30C5 42 12 50 20 50C28 50 35 42 35 30C35 18 20 0 20 0Z" fill="#e85a3c"/></svg>
      {% endif %}
    </span>
    <div>
      <small class="text-white/60 text-xs">
        &copy; {{ 'now' | date: '%Y' }} {{ section.settings.copyright_text | default: shop.name }}. All Rights Reserved.
      </small>
    </div>
  </div>
</footer>

{% schema %}
{
  "name": "Footer",
  "settings": [
    { "type": "image_picker", "id": "badge_image", "label": "Floating Badge" },
    { "type": "url", "id": "badge_link", "label": "Badge Link" },
    { "type": "image_picker", "id": "footer_logo", "label": "Bottom Bar Logo" },
    { "type": "text", "id": "copyright_text", "label": "Copyright Text", "default": "HeatAndCool.com" }
  ],
  "blocks": [
    {
      "type": "contact_info",
      "name": "Contact Info",
      "limit": 1,
      "settings": [
        { "type": "text", "id": "heading", "label": "Heading", "default": "DO YOU HAVE QUESTIONS?" },
        { "type": "text", "id": "subheading", "label": "Subheading", "default": "Contact us. We are here to help." },
        { "type": "text", "id": "phone_number", "label": "Phone", "default": "1-855-783-9597" },
        { "type": "text", "id": "email", "label": "Email Address", "default": "support@heatandcool.com" },
        { "type": "text", "id": "email_text", "label": "Email Link Text", "default": "Send us an email" },
        { "type": "text", "id": "social_button_text", "label": "Ribbon Text", "default": "CONNECT WITH US" },
        { "type": "url", "id": "social_button_url", "label": "Ribbon Link" }
      ]
    },
    {
      "type": "menu_column",
      "name": "Menu Column",
      "settings": [
        { "type": "text", "id": "heading", "label": "Heading" },
        { "type": "link_list", "id": "menu", "label": "Menu" }
      ]
    },
    {
      "type": "social_link",
      "name": "Social Link",
      "settings": [
        { "type": "select", "id": "icon", "label": "Icon", "options": [
          {"value": "facebook", "label": "Facebook"},
          {"value": "youtube", "label": "YouTube"},
          {"value": "blog", "label": "Blog"}
        ]},
        { "type": "url", "id": "url", "label": "URL" }
      ]
    },
    {
      "type": "newsletter",
      "name": "Newsletter",
      "limit": 1,
      "settings": [
        { "type": "text", "id": "heading", "label": "Heading", "default": "SUBSCRIBE TO OUR NEWSLETTER" }
      ]
    },
    {
      "type": "payment_icon",
      "name": "Payment Icon",
      "settings": [
        { "type": "select", "id": "icon", "label": "Icon", "options": [
          {"value": "visa", "label": "Visa"},
          {"value": "mastercard", "label": "Mastercard"},
          {"value": "amex", "label": "Amex"},
          {"value": "discover", "label": "Discover"},
          {"value": "amazon", "label": "Amazon"},
          {"value": "paypal", "label": "PayPal"}
        ]},
        { "type": "image_picker", "id": "custom_image", "label": "Custom Icon" }
      ]
    }
  ],
  "presets": [{ "name": "Footer" }]
}
{% endschema %}